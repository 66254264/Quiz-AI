# 修复速率限制问题

## 问题
登录时显示"请求次数过多，请稍后再试"（429 Too Many Requests）

## 已修复
已更新速率限制器配置，在开发环境中更加宽松：
- 通用限制: 15分钟 1000次（原100次）
- 认证限制: 1分钟 20次（原30秒5次）

## 立即解决方法

### 步骤 1: 重启后端服务
速率限制存储在内存中，重启会清除所有限制。

**如果使用终端运行：**
```bash
# 1. 停止当前服务（按 Ctrl+C）
# 2. 重新启动
cd backend
npm run dev
```

**如果使用 Kiro 的进程管理：**
1. 查看正在运行的进程
2. 停止后端进程
3. 重新启动后端

### 步骤 2: 清除浏览器缓存（可选）
```
1. 打开浏览器开发者工具（F12）
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"
```

### 步骤 3: 重新登录
现在应该可以正常登录了。

## 预防措施

1. **确保在开发环境运行**
   ```bash
   # 检查环境变量
   echo $NODE_ENV
   # 如果显示 'production'，取消设置
   unset NODE_ENV
   ```

2. **避免频繁刷新**
   - 在开发时，尽量使用热重载而不是手动刷新
   - 如果需要测试登录，等待几秒钟再重试

3. **查看速率限制状态**
   - 打开浏览器开发者工具的 Network 标签
   - 查看响应头中的 `RateLimit-*` 信息

## 技术细节

修改的文件：`backend/src/middleware/rateLimiter.ts`

主要变更：
- 根据 `NODE_ENV` 动态调整限制
- 开发环境使用更宽松的限制
- 生产环境保持严格的安全限制
